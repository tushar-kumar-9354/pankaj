{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blogs & Updates | Anjali Bansal & Associates | Company Secretaries</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/blogs.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <h1>ANJALI BANSAL & ASSOCIATES</h1>
                <p>COMPANY SECRETARIES</p>
            </div>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="nav-menu" id="navMenu">
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About</a></li>
                    <li><a href="/services">Services</a></li>
                    <li><a href="/our_expertise">Expertise</a></li>
                    <li><a href="/blogs" class="active">Blogs</a></li>
                    <li><a href="/contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Banner -->
    <section class="blogs-hero">
        <div class="container">
            <div class="blogs-hero-content">
                <h1 class="page-title">Insights & Updates</h1>
                <p class="page-subtitle">Expert analysis on corporate law, FEMA, SEBI regulations, and industry trends</p>
                <div class="breadcrumb">
                    <a href="/">Home</a> / <span>Blogs & Updates</span>
                </div>
            </div>
        </div>
        <div class="hero-overlay"></div>
        <div class="hero-shape">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
                <path fill="#ffffff" fill-opacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
            </svg>
        </div>
    </section>

    <!-- Blogs Main Content -->
    <section class="blogs-main">
        <div class="container">
            <div class="blogs-container">
                <!-- Sidebar -->
                <aside class="blogs-sidebar">
                    <div class="sidebar-widget">
                        <h3>Categories</h3>
                        <ul class="categories-list">
                            <li>
                                <a href="{% url 'blogs' %}" 
                                   class="{% if not current_category %}active{% endif %}">
                                    <i class="fas fa-newspaper"></i> All Posts
                                </a>
                            </li>
{% for cat in categories %}
<li>
    <a href="?category={{ cat }}"
       class="{% if current_category == cat %}active{% endif %}">
        {{ cat }}
    </a>
</li>
{% endfor %}

                        </ul>
                    </div>
                    
                    <div class="sidebar-widget">
                        <h3>Search Articles</h3>
                        <div class="search-box">
                            <input type="text" placeholder="Search blogs..." id="searchInput">
                            <button id="searchButton"><i class="fas fa-search"></i></button>
                        </div>
                    </div>
                    
                    <!-- DYNAMIC FEATURED POSTS -->
                    <div class="sidebar-widget">
                        <h3>Featured Posts</h3>
                        {% if featured_posts %}
                            {% for post in featured_posts %}
                            <div class="featured-post">
                                <div class="featured-post-content">
                                    <span class="post-category">{{ post.category }}</span>
                                    <h4>{{ post.title|truncatechars:50 }}</h4>
                                    <p>{{ post.excerpt|truncatechars:100 }}</p>
                                    <a href="{% url 'blog_detail' post.slug %}" class="read-more">
                                        Read More <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <p class="no-featured">No featured posts yet</p>
                        {% endif %}
                    </div>
                </aside>

                <!-- Blog Posts -->
                <div class="blog-posts">
                    <div class="posts-filter">
                        <div class="filter-title">
                            <h2>Latest Articles</h2>
                            <p>Expert analysis and regulatory updates</p>
                        </div>
                        <div class="filter-options">
                            <form method="GET" action="{% url 'blogs' %}" id="sortForm">
                                {% if current_category %}
                                <input type="hidden" name="category" value="{{ current_category }}">
                                {% endif %}
                                <select class="sort-select" name="sort" id="sortSelect">
                                    <option value="latest" {% if current_sort == 'latest' %}selected{% endif %}>Latest First</option>
                                    <option value="oldest" {% if current_sort == 'oldest' %}selected{% endif %}>Oldest First</option>
                                    <option value="popular" {% if current_sort == 'popular' %}selected{% endif %}>Most Popular</option>
                                </select>
                            </form>
                        </div>
                    </div>

                    <!-- Blog Post Cards -->
                    {% for blog in blogs %}
<div class="post-card {% if blog.is_featured %}featured-post-card{% endif %}">
    
    {% if blog.featured_image or blog.image_url %}
    <div class="post-card-image">
        <img src="{% if blog.featured_image %}{{ blog.featured_image.url }}{% else %}{{ blog.image_url }}{% endif %}" 
             alt="{{ blog.title }}"
             onerror="this.parentElement.style.display='none';"> {% if blog.is_featured %}
        <div class="post-badge">FEATURED</div>
        {% endif %}
    </div>
    {% endif %}
    
    <div class="post-card-content">
        <div class="post-meta">
            <span class="post-category">{{ blog.category }}</span>
            <span class="post-date"><i class="far fa-calendar"></i> {{ blog.date_published|date:"M d, Y" }}</span>
            <span class="read-time"><i class="far fa-clock"></i> {{ blog.read_time }} min read</span>
        </div>
        <h3>{{ blog.title }}</h3>
        <p class="post-excerpt">{{ blog.excerpt }}</p>
        <div class="post-author">
            <div class="author-info">
                <div class="author-avatar">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div>
                    <h5>Anjali Bansal</h5>
                    <p>Managing Partner</p>
                </div>
            </div>
            <a href="{% url 'blog_detail' blog.slug %}" class="read-article-btn">
                Read Article <i class="fas fa-arrow-right"></i>
            </a>
        </div>
    </div>
</div>
{% empty %}
<div class="no-posts">
    <p>No blog posts available yet. Check back soon!</p>
</div>
{% endfor %}
                    <!-- DYNAMIC PAGINATION -->
                    {% if page_obj.paginator.num_pages > 1 %}
                    <div class="pagination">
                        {% if page_obj.has_previous %}
<a href="?page={{ page_obj.previous_page_number }}{% if current_category %}&category={{ current_category }}{% endif %}">
    Prev
</a>
{% endif %}

{% if page_obj.has_next %}
<a href="?page={{ page_obj.next_page_number }}{% if current_category %}&category={{ current_category }}{% endif %}">
    Next
</a>
{% endif %}

                        {% for num in page_obj.paginator.page_range %}
                            {% if page_obj.number == num %}
                            <span class="page-number active">{{ num }}</span>
                            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                            <a href="?page={{ num }}{% if current_category %}&category={{ current_category }}{% endif %}{% if current_sort %}&sort={{ current_sort }}{% endif %}" 
                               class="page-number">{{ num }}</a>
                            {% endif %}
                        {% endfor %}
                        
                        {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}{% if current_category %}&category={{ current_category }}{% endif %}{% if current_sort %}&sort={{ current_sort }}{% endif %}" 
                           class="next-page">
                            Next <i class="fas fa-chevron-right"></i>
                        </a>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>

    <!-- Newsletter Section -->
    

    <!-- Footer -->
<footer style="background-color: #1a1a1a; color: #ffffff; padding: 40px 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
    <div style="max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 30px;">
        
        <div style="flex: 1; min-width: 250px;">
            <h3 style="color: #4CAF50; margin-bottom: 15px;">ANJALI BANSAL & ASSOCIATES</h3>
            <p style="font-size: 14px; line-height: 1.6; color: #cccccc;">
                Providing quality corporate secretarial services with transparency and integrity.
            </p>
        </div>

        <div style="flex: 1; min-width: 150px;">
            <h4 style="margin-bottom: 15px; font-size: 18px;">Quick Links</h4>
            <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 2;">
                <li><a href="/" style="color: #cccccc; text-decoration: none;">Home</a></li>
                <li><a href="/about" style="color: #cccccc; text-decoration: none;">About Us</a></li>
                <li><a href="/services" style="color: #cccccc; text-decoration: none;">Services</a></li>
                <li><a href="/contact" style="color: #cccccc; text-decoration: none;">Contact</a></li>
            </ul>
        </div>

        <div style="flex: 1; min-width: 150px;">
            <h4 style="margin-bottom: 15px; font-size: 18px;">Legal Support</h4>
            <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 2;">
                <li><a href="/privacy-policy" style="color: #cccccc; text-decoration: none; transition: 0.3s;">Privacy Policy</a></li>
                <li><a href="/terms-and-conditions" style="color: #cccccc; text-decoration: none; transition: 0.3s;">Terms & Conditions</a></li>
                <li><a href="/refund-policy" style="color: #cccccc; text-decoration: none; transition: 0.3s;">Refund Policy</a></li>
                <li><a href="/disclaimer" style="color: #cccccc; text-decoration: none; transition: 0.3s;">Disclaimer</a></li>
            </ul>
        </div>
    </div>

    <hr style="border: 0; border-top: 1px solid #333; margin: 30px 0;">

    <div style="max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; font-size: 13px; color: #888;">
        <p>&copy; 2025 Anjali Bansal & Associates. All Rights Reserved.</p>
        <div style="display: flex; gap: 15px;">
            <a href="#" style="color: #888; text-decoration: none;">Twitter</a>
            <a href="#" style="color: #888; text-decoration: none;">LinkedIn</a>
            <a href="#" style="color: #888; text-decoration: none;">Instagram</a>
        </div>
    </div>
</footer>

    <script src="{% static 'js/script.js' %}"></script>
    <script src="{% static 'js/blogs.js' %}"></script>
    <script>
        // Auto-submit sort form when select changes
        document.getElementById('sortSelect').addEventListener('change', function() {
            document.getElementById('sortForm').submit();
        });
        
        // Search functionality
        document.getElementById('searchButton').addEventListener('click', performSearch);
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                performSearch();
            }
        });
        
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.trim();
            if (searchTerm) {
                // Redirect to search results (you'll need to create a search view)
                window.location.href = `/blogs/search/?q=${encodeURIComponent(searchTerm)}`;
            }
        }
    </script>
</body>
</html>