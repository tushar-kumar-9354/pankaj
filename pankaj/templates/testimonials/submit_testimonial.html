{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share Your Experience | KP RegTech | </title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/testimonials.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap">
    <style>
        /* Hero Section - Matches About Page Theme */
        .testimonial-hero {
            background: linear-gradient(rgba(42, 67, 101, 0.9), rgba(42, 67, 101, 0.9)), 
                        url('https://images.unsplash.com/photo-1553877522-43269d4ea984?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 120px 0 80px;
            text-align: center;
            position: relative;
        }

        .testimonial-hero-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .testimonial-hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: white;
        }

        .testimonial-hero p {
            font-size: 1.25rem;
            line-height: 1.6;
            opacity: 0.9;
            margin-bottom: 40px;
        }

        /* Process Steps - Inspired by About Page Stats */
        .process-steps {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 50px;
            flex-wrap: wrap;
        }

        .process-step {
            text-align: center;
            flex: 1;
            min-width: 200px;
            max-width: 250px;
        }

        .step-icon-circle {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            font-size: 2rem;
            color: white;
        }

        /* Form Container - Matches Professional Theme */
        .form-section-wrapper {
            background: #f8f9fa;
            padding: 80px 0;
        }

        .form-container {
            background: white;
            border-radius: 12px;
            padding: 50px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            max-width: 1000px;
            margin: 0 auto;
        }

        .form-section-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            color: #2a4365;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .form-section-title i {
            color: #3498db;
            font-size: 1.5rem;
        }

        /* Form Elements - Professional Styling */
        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            display: block;
            font-size: 0.95rem;
        }

        .form-label.required::after {
            content: ' *';
            color: #e74c3c;
        }

        .form-control {
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-control:focus {
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Rating Stars - Enhanced Design */
        .rating-container {
            background: #f8fafc;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
        }

        .rating-header {
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .star-rating {
            display: flex;
            justify-content: center;
            gap: 5px;
            direction: rtl;
        }

        .star-rating input {
            display: none;
        }

        .star-rating label {
            color: #e2e8f0;
            font-size: 2.8rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .star-rating input:checked ~ label,
        .star-rating label:hover,
        .star-rating label:hover ~ label {
            color: #ffc107;
        }

        .rating-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #666;
            font-size: 0.9rem;
        }

        /* Services Grid - Like About Page */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .service-checkbox {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .service-checkbox:hover {
            border-color: #3498db;
            transform: translateY(-2px);
        }

        .service-checkbox input:checked + .service-content {
            border-color: #3498db;
            background: #ebf8ff;
        }

        /* Character Counter */
        .character-counter {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            font-size: 0.85rem;
        }

        .counter-progress {
            flex-grow: 1;
            height: 4px;
            background: #e2e8f0;
            border-radius: 2px;
            overflow: hidden;
            margin: 0 10px;
        }

        .progress-bar {
            height: 100%;
            background: #3498db;
            transition: width 0.3s;
        }

        /* Terms Card */
        .terms-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        /* Buttons - Matching About Page */
        .form-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e2e8f0;
        }

        .btn-back {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 30px;
            background: white;
            border: 2px solid #3498db;
            color: #3498db;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
        }

        .btn-back:hover {
            background: #3498db;
            color: white;
        }

        .btn-submit {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 40px;
            background: linear-gradient(135deg, #3498db 0%, #2a4365 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
        }

        /* Image Preview */
        .image-upload-container {
            position: relative;
        }

        .image-preview {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            overflow: hidden;
            margin-top: 15px;
            border: 3px solid #3498db;
            display: none;
            position: relative;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(231, 76, 60, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            display: none;
        }

        /* Success Timeline - Like Team Section */
        .timeline-section {
            margin-top: 60px;
            padding: 40px;
            background: #f8fafc;
            border-radius: 12px;
        }

        .timeline-title {
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: #2a4365;
            margin-bottom: 40px;
        }

        .timeline-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
        }

        .timeline-steps::before {
            content: '';
            position: absolute;
            top: 40px;
            left: 10%;
            right: 10%;
            height: 2px;
            background: #3498db;
            z-index: 1;
        }

        .timeline-step {
            text-align: center;
            flex: 1;
            position: relative;
            z-index: 2;
        }

        .timeline-icon {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            border: 3px solid #3498db;
            font-size: 1.8rem;
            color: #3498db;
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .form-container {
                padding: 30px;
                margin: 0 20px;
            }
            
            .testimonial-hero h1 {
                font-size: 2.8rem;
            }
            
            .process-steps {
                gap: 20px;
            }
            
            .timeline-steps {
                flex-direction: column;
                gap: 40px;
            }
            
            .timeline-steps::before {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .form-buttons {
                flex-direction: column;
                gap: 20px;
            }
            
            .services-grid {
                grid-template-columns: 1fr;
            }
            
            .testimonial-hero {
                padding: 80px 0 50px;
            }
            
            .testimonial-hero h1 {
                font-size: 2.2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header (Same as About Page) -->
    <header>
        <div class="container header-container">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            
            <div class="logo">
                <img src="{% static 'images/kplogo.png' %}" alt="Company Logo" class="logo-image">
                <div class="logo-text">
                    <h1>KP RegTech</h1>
                    <p></p>
                </div>
            </div>
            
            <nav class="nav-menu" id="navMenu">
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/about">About</a></li>
                    <li><a href="/our_expertise">Expertise</a></li>
                    <li><a href="/testimonials">Testimonials</a></li>
                    <li><a href="/blogs">Blogs</a></li>
                    <li><a href="/contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="testimonial-hero">
        <div class="container">
            <div class="testimonial-hero-content">
                <h1><i class="fas fa-comment-medical"></i> Share Your Experience</h1>
                <p>Your insights and feedback are invaluable to us and to fellow business leaders. Share your journey with KP RegTech and help others make informed decisions about corporate governance excellence.</p>
                
                <div class="process-steps">
                    <div class="process-step">
                        <div class="step-icon-circle">
                            <i class="fas fa-edit"></i>
                        </div>
                        <h3>Share Your Story</h3>
                        <p>Provide detailed feedback about your experience</p>
                    </div>
                    <div class="process-step">
                        <div class="step-icon-circle">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Verification</h3>
                        <p>Our team reviews your submission</p>
                    </div>
                    <div class="process-step">
                        <div class="step-icon-circle">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h3>Publication</h3>
                        <p>Featured on our testimonials page</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Form Section -->
    <section class="form-section-wrapper">
        <div class="container">
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-{{ message.tags }} mb-4" role="alert">
                        <i class="fas fa-{% if message.tags == 'success' %}check-circle{% else %}exclamation-triangle{% endif %} me-2"></i>
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}

            <div class="form-container">
                <form method="post" enctype="multipart/form-data" id="testimonialForm">
                    {% csrf_token %}
                    
                    <!-- Personal Information -->
                    <div class="mb-5">
                        <h3 class="form-section-title">
                            <i class="fas fa-user-circle"></i> Personal Information
                        </h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label required">Full Name</label>
                                    {{ form.full_name }}
                                    {% if form.full_name.errors %}
                                    <div class="text-danger small mt-1">{{ form.full_name.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label required">Email Address</label>
                                    {{ form.email }}
                                    {% if form.email.errors %}
                                    <div class="text-danger small mt-1">{{ form.email.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    {{ form.phone }}
                                    {% if form.phone.errors %}
                                    <div class="text-danger small mt-1">{{ form.phone.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label">Profile Photo (Optional)</label>
                                    <div class="image-upload-container">
                                        {{ form.profile_picture }}
                                        <div class="image-preview" id="imagePreview">
                                            <img id="previewImage" src="" alt="Preview">
                                            <button type="button" class="remove-image" id="removeImage" onclick="removeImage()">
                                                <i class="fas fa-times"></i>
                                            </button>
                                        </div>
                                        <small class="text-muted">Recommended: Square image, max 2MB</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Professional Information -->
                    <div class="mb-5">
                        <h3 class="form-section-title">
                            <i class="fas fa-briefcase"></i> Professional Information
                        </h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label required">Company Name</label>
                                    <h5 style="color: #2a4365;">Write NA if user doesn't have a company*</h5>
                                    {{ form.company_name }}
                                    {% if form.company_name.errors %}
                                    <div class="text-danger small mt-1">{{ form.company_name.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label class="form-label required">Your Position</label>
                                    <h5 style="color: #2a4365;">Write NA if user doesn't have a position*</h5>
                                    {{ form.position }}
                                    {% if form.position.errors %}
                                    <div class="text-danger small mt-1">{{ form.position.errors }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label required">Industry</label>
                            {{ form.industry }}
                            {% if form.industry.errors %}
                            <div class="text-danger small mt-1">{{ form.industry.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Services Used -->
                    <!-- Services Used -->
<div class="mb-5">
    <h3 class="form-section-title">
        <i class="fas fa-cogs"></i> Services Used
    </h3>

    <div class="form-group">
        <label class="form-label required">Select Service</label>

        {{ form.services_used }}

        {% if form.service.errors %}
        <div class="text-danger small mt-1">
            {{ form.service.errors }}
        </div>
        {% endif %}
    </div>
</div>

<!-- Video Testimonial Section -->
<div class="mb-5">
    <h3 class="form-section-title">
        <i class="fas fa-video"></i> Video Testimonial (Optional)
    </h3>
    
    <div class="video-upload-section">
        <div class="row">
            <div class="col-md-6">
                <div class="video-option-card mb-4">
                    <div class="form-group">
                        <label class="form-label">
                            <i class="fas fa-upload me-2"></i>Upload Video File
                        </label>
                        <input type="file" class="form-control" name="video_file" 
                               id="video_file" accept="video/*" 
                               onchange="previewVideoFile(this)">
                        <small class="text-muted">
                            Max 50MB. Supported formats: MP4, AVI, MOV, WMV
                        </small>
                    </div>
                    
                    <div class="video-preview mt-3" id="videoFilePreview" style="display: none;">
                        <video controls width="100%" style="max-height: 200px; border-radius: 8px;">
                            <source id="videoPreviewSource" src="">
                            Your browser does not support the video tag.
                        </video>
                        <button type="button" class="btn btn-sm btn-danger mt-2" 
                                onclick="removeVideoFile()">
                            <i class="fas fa-trash me-1"></i>Remove Video
                        </button>
                    </div>
                </div>
            </div>
            
            
        <div class="alert alert-info">
            <i class="fas fa-info-circle me-2"></i>
            <strong>Video Guidelines:</strong>
            <ul class="mb-0 mt-2">
                <li>Keep videos under 2 minutes for best engagement</li>
                <li>Ensure good lighting and clear audio</li>
                <li>Landscape orientation works best</li>
                <li>You can provide either a file upload OR a URL</li>
            </ul>
        </div>
    </div>
</div>

                    <!-- Rating -->
                    <div class="mb-5">
                        <h3 class="form-section-title">
                            <i class="fas fa-star"></i> Your Rating
                        </h3>
                        
                        <div class="rating-container">
                            <div class="rating-header">
                                <h4 class="mb-2">How would you rate your overall experience?</h4>
                                <p class="text-muted">Click on the stars below to select your rating</p>
                            </div>
                            
                            <div class="star-rating">
                                {% for i in "54321" %}
                                <input type="radio" id="star{{ i }}" name="rating" value="{{ i }}" 
                                       {% if form.rating.value == i or i == "5" and not form.rating.value %}checked{% endif %}>
                                <label for="star{{ i }}" title="{{ i }} star{{ i|pluralize }}">
                                    <i class="fas fa-star"></i>
                                </label>
                                {% endfor %}
                            </div>
                            
                            <div class="rating-labels">
                                <span>Poor</span>
                                <span>Fair</span>
                                <span>Good</span>
                                <span>Very Good</span>
                                <span>Excellent</span>
                            </div>
                            
                            {% if form.rating.errors %}
                            <div class="text-danger small text-center mt-3">{{ form.rating.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Testimonial Content -->
                    <div class="mb-5">
                        <h3 class="form-section-title">
                            <i class="fas fa-comment-dots"></i> Your Testimonial
                        </h3>
                        
                        <div class="form-group">
                            <label class="form-label required">Share Your Experience</label>
                            {{ form.testimonial_text }}
                            
                            <div class="character-counter">
                                <span id="charCount">0 characters</span>
                                <div class="counter-progress">
                                    <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                                </div>
                                <span id="charStatus">Minimum: 100</span>
                            </div>
                            
                            {% if form.testimonial_text.errors %}
                            <div class="text-danger small mt-2">{{ form.testimonial_text.errors }}</div>
                            {% endif %}
                        </div>
                    </div>

                    <!-- Display Preferences -->
                    <div class="mb-5">
                        <h3 class="form-section-title">
                            <i class="fas fa-user-shield"></i> Display Preferences
                        </h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    {{ form.is_anonymous }}
                                    <label class="form-check-label ms-2" for="id_is_anonymous">
                                        <strong>Post Anonymously</strong><br>
                                        <small class="text-muted">Your name will appear as "Anonymous Client"</small>
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check mb-3">
                                    {{ form.show_industry }}
                                    <label class="form-check-label ms-2" for="id_show_industry">
                                        <strong>Display Industry</strong><br>
                                        <small class="text-muted">Show your industry alongside testimonial</small>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Terms & Conditions -->
                    <div class="mb-5">
                        <div class="terms-card">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" 
                                       name="terms_agreed" id="terms_agreed" required>
                                <label class="form-check-label ms-2" for="terms_agreed">
                                    <strong>I agree to the following terms:</strong><br>
                                    <small class="text-muted">
                                        1. This testimonial is based on my genuine experience<br>
                                        2. I authorize publication with appropriate editing for clarity<br>
                                        3. I understand testimonials are moderated<br>
                                        4. I can request removal at any time
                                    </small>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Buttons -->
                    <div class="form-buttons">
                        <a href="{% url 'testimonials' %}" class="btn-back">
                            <i class="fas fa-arrow-left me-2"></i>Back to Testimonials
                        </a>
                        <button type="submit" class="btn-submit" id="submitBtn">
                            <i class="fas fa-paper-plane me-2"></i>Submit Your Experience
                        </button>
                    </div>
                </form>

                <!-- Post-Submission Timeline -->
                <div class="timeline-section">
                    <h3 class="timeline-title">
                        <i class="fas fa-road me-2"></i>What Happens Next?
                    </h3>
                    
                    <div class="timeline-steps">
                        <div class="timeline-step">
                            <div class="timeline-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <h5>Confirmation Email</h5>
                            <p class="text-muted">Immediate acknowledgment sent</p>
                        </div>
                        
                        <div class="timeline-step">
                            <div class="timeline-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <h5>Review Process</h5>
                            <p class="text-muted">Quality check within 48 hours</p>
                        </div>
                        
                        <div class="timeline-step">
                            <div class="timeline-icon">
                                <i class="fas fa-check-double"></i>
                            </div>
                            <h5>Approval</h5>
                            <p class="text-muted">You'll be notified upon approval</p>
                        </div>
                        
                        <div class="timeline-step">
                            <div class="timeline-icon">
                                <i class="fas fa-globe"></i>
                            </div>
                            <h5>Live on Site</h5>
                            <p class="text-muted">Featured in testimonials</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer (Same as About Page) -->
    <footer style="background-color: #1a1a1a; color: #ffffff; padding: 40px 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;">
        <div style="max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; gap: 30px;">
            
            <div style="flex: 1; min-width: 250px;">
                <h3 style="color: white; margin-bottom: 15px;">KP RegTech</h3>
                <p style="font-size: 14px; line-height: 1.6; color: #cccccc;">
                    Pioneering corporate governance and compliance solutions with integrity, expertise, and unwavering commitment to client success.
                </p>
            </div>

            <div style="flex: 1; min-width: 150px;">
                <h4 style="margin-bottom: 15px; font-size: 18px;">Quick Links</h4>
                <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 2;">
                    <li><a href="/" style="color: #cccccc; text-decoration: none;">Home</a></li>
                    <li><a href="/about" style="color: #cccccc; text-decoration: none;">About Us</a></li>
                    <li><a href="/our_expertise" style="color: #cccccc; text-decoration: none;">Expertise</a></li>
                    <li><a href="/testimonials" style="color: #cccccc; text-decoration: none;">Testimonials</a></li>
                </ul>
            </div>

            <div style="flex: 1; min-width: 150px;">
                <h4 style="margin-bottom: 15px; font-size: 18px;">Legal</h4>
                <ul style="list-style: none; padding: 0; font-size: 14px; line-height: 2;">
                    <li><a href="/privacy-policy" style="color: #cccccc; text-decoration: none;">Privacy Policy</a></li>
                    <li><a href="/terms" style="color: #cccccc; text-decoration: none;">Terms & Conditions</a></li>
                    <li><a href="/disclaimer" style="color: #cccccc; text-decoration: none;">Disclaimer</a></li>
                </ul>
            </div>
        </div>

        <hr style="border: 0; border-top: 1px solid #333; margin: 30px 0;">

        <div style="max-width: 1200px; margin: 0 auto; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; font-size: 13px; color: #888;">
            <p>&copy; {% now "Y" %} KP RegTech. All Rights Reserved.</p>
            <div style="display: flex; gap: 15px;">
                <a href="#" style="color: #888; text-decoration: none;">LinkedIn</a>
                <a href="#" style="color: #888; text-decoration: none;">Twitter</a>
                <a href="#" style="color: #888; text-decoration: none;">Instagram</a>
            </div>
        </div>
    </footer>

    <script src="{% static 'js/script.js' %}"></script>
    <script>
        // Character Counter with Progress
        const textarea = document.querySelector('textarea[name="testimonial_text"]');
        const charCount = document.getElementById('charCount');
        const charStatus = document.getElementById('charStatus');
        const progressBar = document.getElementById('progressBar');
        
        if (textarea) {
            function updateCharacterCounter() {
                const length = textarea.value.trim().length;
                charCount.textContent = `${length} characters`;
                
                let percentage = Math.min((length / 500) * 100, 100);
                progressBar.style.width = `${percentage}%`;
                
                if (length === 0) {
                    charStatus.textContent = 'Minimum: 100';
                    charStatus.className = 'text-muted';
                    progressBar.style.background = '#e2e8f0';
                } else if (length < 100) {
                    charStatus.textContent = `Need ${100 - length} more`;
                    charStatus.className = 'text-danger';
                    progressBar.style.background = '#e74c3c';
                } else if (length < 300) {
                    charStatus.textContent = 'Good start!';
                    charStatus.className = 'text-warning';
                    progressBar.style.background = '#f39c12';
                } else {
                    charStatus.textContent = 'Excellent!';
                    charStatus.className = 'text-success';
                    progressBar.style.background = '#27ae60';
                }
            }
            
            updateCharacterCounter();
            textarea.addEventListener('input', updateCharacterCounter);
        }
        
        // Image Preview
        function previewImage(input) {
            const preview = document.getElementById('previewImage');
            const previewContainer = document.getElementById('imagePreview');
            const removeBtn = document.getElementById('removeImage');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    previewContainer.style.display = 'block';
                    removeBtn.style.display = 'block';
                }
                
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        function removeImage() {
            const input = document.querySelector('input[name="profile_picture"]');
            const previewContainer = document.getElementById('imagePreview');
            const removeBtn = document.getElementById('removeImage');
            
            input.value = '';
            previewContainer.style.display = 'none';
            removeBtn.style.display = 'none';
        }
        
        // Initialize image preview
        const fileInput = document.querySelector('input[name="profile_picture"]');
        if (fileInput) {
            fileInput.addEventListener('change', function() {
                previewImage(this);
            });
        }
        
        // Form Validation
        document.getElementById('testimonialForm').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('submitBtn');
            const testimonialText = textarea ? textarea.value.trim() : '';
            const termsAgreed = document.getElementById('terms_agreed').checked;
            
            if (testimonialText.length < 100) {
                e.preventDefault();
                alert('Please provide a detailed testimonial of at least 100 characters.');
                if (textarea) textarea.focus();
                return false;
            }
            
            if (!termsAgreed) {
                e.preventDefault();
                alert('You must agree to the terms and conditions.');
                document.getElementById('terms_agreed').focus();
                return false;
            }
            
            // Disable submit button during submission
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Submitting...';
            submitBtn.disabled = true;
        });
        
        // Star Rating Enhancement
        const stars = document.querySelectorAll('.star-rating label');
        stars.forEach(star => {
            star.addEventListener('mouseover', function() {
                const value = this.getAttribute('for').replace('star', '');
                highlightStars(value);
            });
            
            star.addEventListener('mouseout', function() {
                const checked = document.querySelector('.star-rating input:checked');
                if (checked) {
                    highlightStars(checked.value);
                }
            });
        });
        
        function highlightStars(value) {
            stars.forEach(star => {
                const starValue = star.getAttribute('for').replace('star', '');
                const icon = star.querySelector('i');
                if (starValue <= value) {
                    icon.style.color = '#ffc107';
                    icon.style.transform = 'scale(1.1)';
                } else {
                    icon.style.color = '#e2e8f0';
                    icon.style.transform = 'scale(1)';
                }
            });
        }
        
        // Service Checkbox Enhancement
        const serviceCheckboxes = document.querySelectorAll('.service-checkbox');
        serviceCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('click', function() {
                const input = this.querySelector('input');
                input.checked = !input.checked;
            });
        });
    </script>
</body>
</html>